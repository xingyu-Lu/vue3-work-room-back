var N=Object.defineProperty,q=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var R=(n,o,s)=>o in n?N(n,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[o]=s,A=(n,o)=>{for(var s in o||(o={}))j.call(o,s)&&R(n,s,o[s]);if(E)for(var s of E(o))L.call(o,s)&&R(n,s,o[s]);return n},D=(n,o)=>q(n,B(o));import{_ as M}from"./index.52ad2cf7.js";import{u as O,aq as U,r as F,o as T,b as y,t as G,an as H,d as p,ao as I,e as i,n as P,w as c,E as x,j as a,g as V,ap as J,f as d,h as m,k}from"./vendor.09a2a638.js";const K={name:"rotate_list",setup(){const n=O(),o=U(),{type:s}=o.query,e=F({type:"0",title:"",loading:!1,tableData:[],srcList:[],total:0,currentPage:1,pageSize:10,multipleSelection:[]});T(()=>{s&&(e.type=s),u()});const u=()=>{e.loading=!0,y.get("/api/back/news",{params:{page:e.currentPage,page_size:e.pageSize,title:e.title,type:e.type}}).then(l=>{e.tableData=l.data,e.pageSize=l.pagination.perPage,e.total=l.pagination.total,e.currentPage=l.pagination.currentPage,e.loading=!1})},z=()=>{e.currentPage=1,u()},_=l=>{e.currentPage=l,u()},h=()=>{n.push({path:"/news-add"})},C=l=>{n.push({path:"/news-add",query:{id:l}})},w=l=>{n.push({path:"/news-preview",query:{id:l}})},r=(l,S)=>{y.put("/api/back/news/status",{id:l,status:S}).then(()=>{x.success("\u4FEE\u6539\u6210\u529F"),u()})},b=l=>{e.multipleSelection=l},f=()=>{y.put("/api/back/news/recommend",{multipleSelection:e.multipleSelection,is_recommend:1}).then(()=>{x.success("\u8BBE\u7F6E\u6210\u529F"),u()})},v=()=>{y.put("/api/back/news/recommend",{multipleSelection:e.multipleSelection,is_recommend:0}).then(()=>{x.success("\u53D6\u6D88\u6210\u529F"),u()})};return D(A({},G(e)),{handleOption:z,changePage:_,handleAdd:h,handleEdit:C,handleStatus:r,handlePreview:w,handleSelectionChange:b,handleRecommend:f,handleCancelRecommend:v,Plus:H})}},Q=k("\u65B0\u589E"),W=k("\u641C\u7D22"),X=k("\u8BBE\u7F6E\u63A8\u8350"),Y=k("\u53D6\u6D88\u63A8\u8350"),Z={key:1},$={key:0},ee={key:1},te={key:2},ne={key:0,style:{color:"#67C23A"}},ae={key:1,style:{color:"#E6A23C"}},oe={key:2,style:{color:"#F56C6C"}},le={key:0,style:{color:"#67C23A"}},ie={key:1,style:{color:"#E6A23C"}},se=["onClick"],re=["onClick"],ce=["onClick"],de=["onClick"],pe=["onClick"];function ue(n,o,s,e,u,z){const _=p("el-button"),h=p("el-option"),C=p("el-select"),w=p("el-input"),r=p("el-table-column"),b=p("el-image"),f=p("el-table"),v=p("el-pagination"),l=p("el-card"),S=I("loading");return i(),P(l,{style:{"min-height":"100%"}},{header:c(()=>[a(_,{type:"primary",icon:e.Plus,onClick:e.handleAdd},{default:c(()=>[Q]),_:1},8,["icon","onClick"]),V("div",null,[a(C,{modelValue:n.type,"onUpdate:modelValue":o[0]||(o[0]=t=>n.type=t),placeholder:"Select",filterable:""},{default:c(()=>[a(h,{value:"0",label:"\u533B\u9662\u65B0\u95FB"}),a(h,{value:"1",label:"\u533B\u9662\u516C\u544A"}),a(h,{value:"2",label:"\u89C6\u9891\u65B0\u95FB"})]),_:1},8,["modelValue"]),a(w,{style:{width:"200px","margin-top":"20px","margin-right":"10px","margin-left":"10px"},placeholder:"\u8BF7\u8F93\u5165\u6807\u9898",modelValue:n.title,"onUpdate:modelValue":o[1]||(o[1]=t=>n.title=t),clearable:""},null,8,["modelValue"]),a(_,{type:"primary",onClick:e.handleOption},{default:c(()=>[W]),_:1},8,["onClick"]),a(_,{type:"primary",onClick:e.handleRecommend},{default:c(()=>[X]),_:1},8,["onClick"]),a(_,{type:"primary",onClick:e.handleCancelRecommend},{default:c(()=>[Y]),_:1},8,["onClick"])])]),default:c(()=>[J((i(),P(f,{data:n.tableData,stripe:"",style:{width:"100%"},onSelectionChange:e.handleSelectionChange},{default:c(()=>[a(r,{type:"selection"}),a(r,{prop:"id",label:"id"}),a(r,{label:"\u56FE\u7247"},{default:c(t=>[t.row.url?(i(),P(b,{key:t.row.id,src:t.row.url,lazy:!0,"initial-index":1},null,8,["src"])):(i(),d("span",Z,"\u65E0"))]),_:1}),a(r,{prop:"type",label:"\u7C7B\u578B"},{default:c(t=>[t.row.type==0?(i(),d("span",$,"\u533B\u9662\u65B0\u95FB")):m("",!0),t.row.type==1?(i(),d("span",ee,"\u533B\u9662\u516C\u544A")):m("",!0),t.row.type==2?(i(),d("span",te,"\u89C6\u9891\u65B0\u95FB")):m("",!0)]),_:1}),a(r,{prop:"title",label:"\u6807\u9898"}),a(r,{prop:"release_time",label:"\u53D1\u5E03\u65F6\u95F4"}),a(r,{prop:"num",label:"\u6D4F\u89C8\u6B21\u6570"}),a(r,{prop:"status",label:"\u72B6\u6001"},{default:c(t=>[t.row.status==1?(i(),d("span",ne,"\u5DF2\u5BA1\u6838")):t.row.status==0?(i(),d("span",ae,"\u5F85\u5BA1\u6838")):(i(),d("span",oe,"\u5BA1\u6838\u4E0D\u8FC7"))]),_:1}),a(r,{prop:"is_recommend",label:"\u662F\u5426\u63A8\u8350"},{default:c(t=>[t.row.is_recommend==1?(i(),d("span",le,"\u662F")):t.row.is_recommend==0?(i(),d("span",ie,"\u5426")):m("",!0)]),_:1}),a(r,{prop:"created_at",label:"\u521B\u5EFA\u65F6\u95F4"}),a(r,{label:"\u64CD\u4F5C",width:"200"},{default:c(t=>[V("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:g=>e.handlePreview(t.row.id)},"\u9884\u89C8",8,se),V("a",{style:{cursor:"pointer","margin-right":"10px"},onClick:g=>e.handleEdit(t.row.id)},"\u4FEE\u6539",8,re),t.row.status==0?(i(),d("a",{key:0,style:{cursor:"pointer","margin-right":"10px"},onClick:g=>e.handleStatus(t.row.id,2)},"\u5BA1\u6838\u4E0D\u8FC7",8,ce)):m("",!0),t.row.status==1?(i(),d("a",{key:1,style:{cursor:"pointer","margin-right":"10px"},onClick:g=>e.handleStatus(t.row.id,0)},"\u64A4\u9500\u5BA1\u6838",8,de)):t.row.status==0?(i(),d("a",{key:2,style:{cursor:"pointer","margin-right":"10px"},onClick:g=>e.handleStatus(t.row.id,1)},"\u5BA1\u6838",8,pe)):m("",!0)]),_:1})]),_:1},8,["data","onSelectionChange"])),[[S,n.loading]]),a(v,{background:"",layout:"prev, pager, next",total:n.total,"page-size":n.pageSize,"current-page":n.currentPage,onCurrentChange:e.changePage},null,8,["total","page-size","current-page","onCurrentChange"])]),_:1})}var ge=M(K,[["render",ue]]);export{ge as default};
