var U=Object.defineProperty,j=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var k=(e,l,n)=>l in e?U(e,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[l]=n,h=(e,l)=>{for(var n in l||(l={}))E.call(l,n)&&k(e,n,l[n]);if(V)for(var n of V(l))C.call(l,n)&&k(e,n,l[n]);return e},v=(e,l)=>j(e,B(l));import"./wangEditor.229e0f90.js";import{_ as S,a as A,b as M}from"./index.8ad4cb05.js";import{am as N,aq as D,u as G,r as L,o as O,b as f,t as T,d as m,e as b,n as q,w as t,E as g,j as o,f as z,q as H,F as I,k as c,i as J}from"./vendor.b09253f4.js";const K={name:"menu_add",setup(){const e=N(null),l=D(),n=G(),{id:d}=l.query,u=L({token:"Bearer "+A("token")||"",id:d,menuForm:{pid:"0",list:[],name:"",url:"",sort:"0",is_enabled:"1"},rules:{pid:[{required:"true",message:"\u4E0A\u7EA7\u83DC\u5355\u5FC5\u987B",trigger:["change"]}],name:[{required:"true",message:"\u8D26\u53F7\u540D\u79F0\u5FC5\u987B",trigger:["change"]}],url:[{required:!1,message:"\u8DEF\u7531\u5FC5\u987B",trigger:["change"]}],sort:[{required:"true",message:"\u6392\u5E8F\u5FC5\u987B",trigger:["change"]}],is_enabled:[{required:"true",message:"\u8D26\u53F7\u72B6\u6001\u5FC5\u987B",trigger:["change"]}]}});O(()=>{F(),d&&f.get(`/api/back/menus/${d}`).then(r=>{u.menuForm={pid:r.data.pid,name:r.data.name,url:r.data.url,sort:r.data.sort,is_enabled:String(r.data.is_enabled)}})});const F=async()=>{const r=await f.get("/api/back/menus");u.menuForm.list=r.data},_=()=>{e.value.validate(r=>{if(r){let s=f.post,i={pid:u.menuForm.pid,name:u.menuForm.name,url:u.menuForm.url,sort:u.menuForm.sort,is_enabled:u.menuForm.is_enabled};if(i.name.length>30){g.error("\u8D26\u53F7\u540D\u79F0\u4E0D\u80FD\u8D85\u8FC730\u4E2A\u5B57\u7B26");return}if(i.url.length>30){g.error("\u8DEF\u7531\u4E0D\u80FD\u8D85\u8FC730\u4E2A\u5B57\u7B26");return}let p="/api/back/menus";d&&(s=f.put,p=`/api/back/menus/${d}`),s(p,i).then(()=>{g.success(d?"\u4FEE\u6539\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),M("menu_list"),n.push({path:"/menu"})})}})};return v(h({},T(u)),{menuRef:e,submitAdd:_})}},P=c("\u5F00\u542F"),Q=c("\u7981\u7528");function W(e,l,n,d,u,F){const _=m("el-option"),r=m("el-select"),s=m("el-form-item"),i=m("el-input"),p=m("el-radio"),y=m("el-radio-group"),R=m("el-button"),$=m("el-form"),w=m("el-card");return b(),q(w,{style:{"min-height":"100%"}},{default:t(()=>[o($,{model:e.menuForm,rules:e.rules,ref:"menuRef","label-width":"100px"},{default:t(()=>[o(s,{label:"\u4E0A\u7EA7\u83DC\u5355",prop:"pid"},{default:t(()=>[o(r,{modelValue:e.menuForm.pid,"onUpdate:modelValue":l[0]||(l[0]=a=>e.menuForm.pid=a),placeholder:"Select"},{default:t(()=>[o(_,{label:"\u65E0",value:"0"}),(b(!0),z(I,null,H(e.menuForm.list,a=>(b(),q(_,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"\u540D\u79F0",prop:"name"},{default:t(()=>[o(i,{modelValue:e.menuForm.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.menuForm.name=a),placeholder:"\u8BF7\u8F93\u5165\u83DC\u5355\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u8DEF\u7531",prop:"url"},{default:t(()=>[o(i,{modelValue:e.menuForm.url,"onUpdate:modelValue":l[2]||(l[2]=a=>e.menuForm.url=a),placeholder:"\u8BF7\u8F93\u5165\u8DEF\u7531"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u6392\u5E8F",prop:"sort"},{default:t(()=>[o(i,{modelValue:e.menuForm.sort,"onUpdate:modelValue":l[3]||(l[3]=a=>e.menuForm.sort=a),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F",type:"number",min:"0"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u4E0A\u67B6\u72B6\u6001",prop:"is_enabled"},{default:t(()=>[o(y,{modelValue:e.menuForm.is_enabled,"onUpdate:modelValue":l[4]||(l[4]=a=>e.menuForm.is_enabled=a)},{default:t(()=>[o(p,{label:"1"},{default:t(()=>[P]),_:1}),o(p,{label:"0"},{default:t(()=>[Q]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(s,null,{default:t(()=>[o(R,{type:"primary",onClick:l[5]||(l[5]=a=>d.submitAdd())},{default:t(()=>[c(J(e.id?"\u7ACB\u5373\u4FEE\u6539":"\u7ACB\u5373\u521B\u5EFA"),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}var ee=S(K,[["render",W]]);export{ee as default};
