var N=Object.defineProperty,E=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var k=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;var y=(t,o,r)=>o in t?N(t,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[o]=r,w=(t,o)=>{for(var r in o||(o={}))O.call(o,r)&&y(t,r,o[r]);if(k)for(var r of k(o))T.call(o,r)&&y(t,r,o[r]);return t},C=(t,o)=>E(t,F(o));import{a as x,B as A,E as R,T as z}from"./index.esm.76000dbd.js";import{_ as B,a as V,c as g}from"./index.e1e2b1ed.js";import{am as I,aq as M,u as S,r as $,au as j,E as c,o as H,b as _,av as q,t as K,d as l,e as U,n as D,w as m,j as d,g as G,k as J,i as L}from"./vendor.c58b0721.js";function P(t,o){const{link:r="",fileName:n=""}=t;return`<a data-w-e-type="attachment" data-w-e-is-void data-w-e-is-inline data-link="${r}" data-fileName="${n}" href="${r}" target="_blank">${n}</a>`}const Q={type:"attachment",elemToHtml:P};x.elemsToHtml=[Q];A.registerModule(x);const W={components:{Editor:R,Toolbar:z},setup(){const t=I(null),o=M(),r=S(),{id:n}=o.query,i=$({token:"Bearer "+V("token")||"",id:n,briefForm:{content:""},rules:{content:[{required:!1,message:"\u5185\u5BB9\u5FC5\u987B",trigger:["change"]}]}}),f=j(),p={insertKeys:{index:31,keys:["uploadAttachment"]}},h={placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9...",hoverbarKeys:{attachment:{menuKeys:["downloadAttachment"]}},MENU_CONF:{uploadImage:{server:g,fieldName:"file",maxFileSize:2*1024*1024,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{basket:"img"},headers:{Authorization:i.token},customInsert:function(e,a){a(e.data.src,e.data.file_name,e.data.src)},onError(e,a,s){c.error(new Error(a).message),console.log(e,a,s)}},uploadVideo:{server:g,fieldName:"file",maxFileSize:100*1024*1024,allowedFileTypes:["video/*"],meta:{basket:"video"},headers:{Authorization:i.token},customInsert:function(e,a){a(e.data.src)},onError(e,a,s){c.error(new Error(a).message),console.log(e,a,s)}},uploadAttachment:{server:g,fieldName:"file",maxFileSize:10*1024*1024,meta:{basket:"attachment"},headers:{Authorization:i.token},customInsert:function(e,a,s){s(`${a.name}`,e.data.src)},onError(e,a,s){c.error(new Error(a).message),console.log(e,a,s)}}}},u=e=>{f.value=e};H(()=>{n&&_.get(`/api/back/technicalOfficeOutpatientNews/${n}`).then(e=>{i.briefForm={content:e.data.content}})}),q(()=>{const e=f.value;e!=null&&e.destroy()});const b=()=>{t.value.validate(e=>{if(e){let a=_.post,s={content:i.briefForm.content},v="/api/back/technicalOfficeOutpatientNews";n&&(a=_.put,v=`/api/back/technicalOfficeOutpatientNews/${n}`),a(v,s).then(()=>{n?c.success("\u4FEE\u6539\u6210\u529F"):c.success("\u6DFB\u52A0\u6210\u529F"),r.push({path:"/technicaloffice-outpatient"})})}})};return C(w({},K(i)),{editorRef:f,mode:"default",toolbarConfig:p,editorConfig:h,handleCreated:u,outpatientRef:t,submitAdd:b})}},X={style:{border:"1px solid #ccc","z-index":"100"}};function Y(t,o,r,n,i,f){const p=l("Toolbar"),h=l("Editor"),u=l("el-form-item"),b=l("el-button"),e=l("el-form"),a=l("el-card");return U(),D(a,{style:{"min-height":"100%"}},{default:m(()=>[d(e,{model:t.briefForm,rules:t.rules,ref:"outpatientRef","label-width":"100px",style:{"margin-top":"30px"}},{default:m(()=>[d(u,{label:"\u5185\u5BB9",prop:"content"},{default:m(()=>[G("div",X,[d(p,{style:{"border-bottom":"1px solid #ccc"},editor:n.editorRef,defaultConfig:n.toolbarConfig,mode:n.mode},null,8,["editor","defaultConfig","mode"]),d(h,{style:{height:"500px","overflow-y":"hidden"},modelValue:t.briefForm.content,"onUpdate:modelValue":o[0]||(o[0]=s=>t.briefForm.content=s),defaultConfig:n.editorConfig,mode:n.mode,onOnCreated:n.handleCreated},null,8,["modelValue","defaultConfig","mode","onOnCreated"])])]),_:1}),d(u,null,{default:m(()=>[d(b,{type:"primary",onClick:o[1]||(o[1]=s=>n.submitAdd())},{default:m(()=>[J(L(t.id?"\u7ACB\u5373\u4FEE\u6539":"\u7ACB\u5373\u521B\u5EFA"),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}var ae=B(W,[["render",Y]]);export{ae as default};
