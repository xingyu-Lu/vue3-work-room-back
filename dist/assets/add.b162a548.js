var V=Object.defineProperty,w=Object.defineProperties;var j=Object.getOwnPropertyDescriptors;var _=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var h=(t,o,n)=>o in t?V(t,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[o]=n,k=(t,o)=>{for(var n in o||(o={}))y.call(o,n)&&h(t,n,o[n]);if(_)for(var n of _(o))A.call(o,n)&&h(t,n,o[n]);return t},b=(t,o)=>w(t,j(o));import{W as H}from"./wangEditor.e45e6b7a.js";import{_ as S,a as $,c as I}from"./index.367fda0e.js";import{am as v,aq as B,u as M,r as N,o as R,b as p,au as z,t as E,d as r,e as F,n as L,w as l,E as x,j as u,g as q,k as C,i as O}from"./vendor.e46c9713.js";const P={name:"culture_add",setup(){const t=v(null),o=v(null),n=B(),d=M(),{id:c}=n.query,i=N({token:"Bearer "+$("token")||"",id:c,cultureForm:{content:""},rules:{content:[{required:!1,message:"\u5185\u5BB9\u5FC5\u987B",trigger:["change"]}]}});let e;R(()=>{e=new H(t.value),e.config.lineHeights=["1","1.15","1.5","2","2.5","3"],e.config.showLinkImg=!1,e.config.showLinkImgAlt=!1,e.config.showLinkImgHref=!1,e.config.uploadImgMaxSize=10*1024*1024,e.config.uploadImgMaxLength=1,e.config.uploadImgAccept=["jpg","jpeg","png","gif","bmp","webp"],e.config.uploadFileName="file",e.config.uploadImgHeaders={Authorization:i.token},e.config.uploadImgParams={basket:"img"},e.config.uploadImgHooks={customInsert:function(a,s){console.log("result",s),a(s.data.src)}},e.config.uploadImgServer=I,Object.assign(e.config,{onchange(){console.log("change")}}),e.config.uploadVideoServer=I,e.config.uploadVideoMaxSize=1*200*1024*1024,e.config.uploadVideoAccept=["mp4"],e.config.uploadVideoParams={basket:"video"},e.config.uploadVideoName="file",e.config.uploadVideoHeaders={Authorization:i.token},e.config.uploadVideoHooks={customInsert:function(a,s){console.log("customInsert",s),a(s.data.src)}},e.create(),c&&p.get(`/api/back/cultures/${c}`).then(a=>{i.cultureForm={content:a.data.content},e&&e.txt.html(a.data.content)})}),z(()=>{e.destroy(),e=null});const f=()=>{o.value.validate(a=>{if(a){let s=p.post,g={content:e.txt.html()},m="/api/back/cultures";c&&(s=p.put,m=`/api/back/cultures/${c}`),s(m,g).then(()=>{c?x.success("\u4FEE\u6539\u6210\u529F"):x.success("\u6DFB\u52A0\u6210\u529F"),d.push({path:"/culture"})})}})};return b(k({},E(i)),{editor:t,cultureRef:o,submitAdd:f})}},W={ref:"editor"};function D(t,o,n,d,c,i){const e=r("el-form-item"),f=r("el-button"),a=r("el-form"),s=r("el-card");return F(),L(s,{style:{"min-height":"100%"}},{default:l(()=>[u(a,{model:t.cultureForm,rules:t.rules,ref:"cultureRef","label-width":"100px",style:{"margin-top":"30px"}},{default:l(()=>[u(e,{label:"\u5185\u5BB9",prop:"content"},{default:l(()=>[q("div",W,null,512)]),_:1}),u(e,null,{default:l(()=>[u(f,{type:"primary",onClick:o[0]||(o[0]=g=>d.submitAdd())},{default:l(()=>[C(O(t.id?"\u7ACB\u5373\u4FEE\u6539":"\u7ACB\u5373\u521B\u5EFA"),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}var K=S(P,[["render",D]]);export{K as default};
