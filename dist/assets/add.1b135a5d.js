var B=Object.defineProperty,I=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var E=(t,o,l)=>o in t?B(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l,V=(t,o)=>{for(var l in o||(o={}))x.call(o,l)&&E(t,l,o[l]);if(w)for(var l of w(o))z.call(o,l)&&E(t,l,o[l]);return t},N=(t,o)=>I(t,R(o));import{a as T,B as S,E as q,T as M}from"./index.esm.76000dbd.js";import{_ as U,a as $,c as v}from"./index.83e2ae4f.js";import{am as j,aq as H,u as K,r as D,au as G,E as u,o as L,b as g,av as J,t as P,d as m,e as y,n as O,w as i,j as s,f as Q,q as W,F as X,g as Y,k as C,i as Z}from"./vendor.c58b0721.js";function ee(t,o){const{link:l="",fileName:n=""}=t;return`<a data-w-e-type="attachment" data-w-e-is-void data-w-e-is-inline data-link="${l}" data-fileName="${n}" href="${l}" target="_blank">${n}</a>`}const te={type:"attachment",elemToHtml:ee};T.elemsToHtml=[te];S.registerModule(T);const oe={name:"menu_add",components:{Editor:q,Toolbar:M},setup(){const t=j(null),o=H(),l=K(),{id:n}=o.query,r=D({token:"Bearer "+$("token")||"",select_flag:!1,id:n,Form:{office_id:"",status:"0",list:[]},rules:{office_id:[{required:!0,message:"\u90E8\u95E8\u5FC5\u987B",trigger:["change"]}],status:[{required:!0,message:"\u72B6\u6001\u5FC5\u987B",trigger:["change"]}]}}),p=G(),h={insertKeys:{index:31,keys:["uploadAttachment"]}},b={placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9...",hoverbarKeys:{attachment:{menuKeys:["downloadAttachment"]}},MENU_CONF:{uploadImage:{server:v,fieldName:"file",maxFileSize:2*1024*1024,maxNumberOfFiles:10,allowedFileTypes:["image/*"],meta:{basket:"img"},headers:{Authorization:r.token},customInsert:function(e,a){a(e.data.src,e.data.file_name,e.data.src)},onError(e,a,d){u.error(new Error(a).message),console.log(e,a,d)}},uploadVideo:{server:v,fieldName:"file",maxFileSize:100*1024*1024,allowedFileTypes:["video/*"],meta:{basket:"video"},headers:{Authorization:r.token},customInsert:function(e,a){a(e.data.src)},onError(e,a,d){u.error(new Error(a).message),console.log(e,a,d)}},uploadAttachment:{server:v,fieldName:"file",maxFileSize:10*1024*1024,meta:{basket:"attachment"},headers:{Authorization:r.token},customInsert:function(e,a,d){d(`${a.name}`,e.data.src)},onError(e,a,d){u.error(new Error(a).message),console.log(e,a,d)}}}},f=e=>{p.value=e};L(()=>{F(),n&&g.get(`/api/back/technicalOfficeIntroduces/${n}`).then(e=>{r.Form={office_id:e.data.office_id,name:e.data.name,content:e.data.content,status:String(e.data.status)},r.select_flag=!0})}),J(()=>{const e=p.value;e!=null&&e.destroy()});const F=async()=>{const e=await g.get("/api/back/technicalOffices");r.Form.list=e.data},k=()=>{t.value.validate(e=>{if(e){let a=g.post,d={office_id:r.Form.office_id,content:r.Form.content,status:r.Form.status},_="/api/back/technicalOfficeIntroduces";n&&(a=g.put,_=`/api/back/technicalOfficeIntroduces/${n}`),a(_,d).then(()=>{n?u.success("\u4FEE\u6539\u6210\u529F"):u.success("\u6DFB\u52A0\u6210\u529F"),l.push({path:"/technicaloffice-introduce"})})}})};return N(V({},P(r)),{Ref:t,editorRef:p,mode:"default",toolbarConfig:h,editorConfig:b,handleCreated:f,submitAdd:k})}},ae={style:{border:"1px solid #ccc","z-index":"100"}},ne=C("\u5DF2\u5BA1\u6838"),le=C("\u5F85\u5BA1\u6838");function se(t,o,l,n,r,p){const h=m("el-option"),b=m("el-select"),f=m("el-form-item"),F=m("Toolbar"),k=m("Editor"),e=m("el-radio"),a=m("el-radio-group"),d=m("el-button"),_=m("el-form"),A=m("el-card");return y(),O(A,{style:{"min-height":"100%"}},{default:i(()=>[s(_,{model:t.Form,rules:t.rules,ref:"Ref","label-width":"100px"},{default:i(()=>[s(f,{label:"\u90E8\u95E8",prop:"office_id"},{default:i(()=>[s(b,{modelValue:t.Form.office_id,"onUpdate:modelValue":o[0]||(o[0]=c=>t.Form.office_id=c),placeholder:"Select",filterable:"",disabled:t.select_flag},{default:i(()=>[(y(!0),Q(X,null,W(t.Form.list,c=>(y(),O(h,{key:c.id,label:c.name,value:c.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),_:1}),s(f,{label:"\u5185\u5BB9",prop:"content"},{default:i(()=>[Y("div",ae,[s(F,{style:{"border-bottom":"1px solid #ccc"},editor:n.editorRef,defaultConfig:n.toolbarConfig,mode:n.mode},null,8,["editor","defaultConfig","mode"]),s(k,{style:{height:"500px","overflow-y":"hidden"},modelValue:t.Form.content,"onUpdate:modelValue":o[1]||(o[1]=c=>t.Form.content=c),defaultConfig:n.editorConfig,mode:n.mode,onOnCreated:n.handleCreated},null,8,["modelValue","defaultConfig","mode","onOnCreated"])])]),_:1}),s(f,{label:"\u72B6\u6001",prop:"status"},{default:i(()=>[s(a,{modelValue:t.Form.status,"onUpdate:modelValue":o[2]||(o[2]=c=>t.Form.status=c),disabled:""},{default:i(()=>[s(e,{label:"1"},{default:i(()=>[ne]),_:1}),s(e,{label:"0"},{default:i(()=>[le]),_:1})]),_:1},8,["modelValue"])]),_:1}),s(f,null,{default:i(()=>[s(d,{type:"primary",onClick:o[3]||(o[3]=c=>n.submitAdd())},{default:i(()=>[C(Z(t.id?"\u7ACB\u5373\u4FEE\u6539":"\u7ACB\u5373\u521B\u5EFA"),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})}var me=U(oe,[["render",se]]);export{me as default};
